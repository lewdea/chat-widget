!function(){const APU_URL="https://api.openai.com/v1/chat/completions",REQUEST_HEADER={"Content-Type":"application/json",Authorization:"Bearer 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"},REQUEST_PAYLOAD={model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are a helpful assistant."}]},script=document.createElement("script");script.src="https://cdn.bootcdn.net/ajax/libs/axios/1.5.0/axios.js";document.head.appendChild(script);const style=document.createElement("style");style.innerHTML="\n  .chat_flex {\n    display: flex;\n  }\n  .chat_hidden {\n    display: none;\n  }\n  .chat_shadow {\n    box-shadow: rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0.1) 0px 4px 6px -1px, rgba(0, 0, 0, 0.06) 0px 2px 4px -1px;\n  }\n  .chat_msg {\n    justify-content: flex-end;\n    margin-bottom: 0.75rem;\n  }\n  .res_msg {\n    margin-bottom: 0.75rem;\n  }\n  #chat-widget-container {\n    position: fixed;\n    bottom: 70px;\n    right: 20px;\n    flex-direction: column;\n    font-family: ui-sans-serif, system-ui;\n  }\n  #chat-popup {\n    height: 60vh;\n    max-height: 60vh;\n    transition: all 0.3s;\n    overflow: hidden;\n  }\n  @media (max-width: 768px) {\n    #chat-popup {\n      position: fixed;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      max-height: 100%;\n      border-radius: 0;\n    }\n  }\n  ";document.head.appendChild(style);const chatWidgetContainer=document.createElement("div");chatWidgetContainer.id="chat-widget-container";document.body.appendChild(chatWidgetContainer);chatWidgetContainer.innerHTML='\n    <div id="chat-bubble" style="background: #20bec8; font-size: 1.875rem; line-height: 2.25rem; border-radius: 9999px; \n        justify-content: center; align-items: center; cursor: pointer; width: 3rem; height: 3rem; display: flex;">\n      <svg xmlns="http://www.w3.org/2000/svg" style="width: 1.5rem; height: 1.5rem; display: block; vertical-align: middle; color: white;"  fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">\n        <path stroke-linecap="round" stroke-linejoin="round" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />\n      </svg>\n    </div>\n    <div id="chat-popup" style="height: 60vh; max-height: 60vh; transition: all 0.3s; overflow: hidden; font-size: .875rem;\n        line-height: 1.25rem; background-color: white; border-radius: 0.375rem; flex-direction: column; width: 24rem;\n         bottom: 5rem; right: 0; position: absolute;"\n        class="chat_hidden chat_shadow chat_flex">\n      <div id="chat-header" class="chat_flex" \n        style="background: #20bec8; color: white; padding: 1rem; border-top-left-radius: 0.375rem; border-top-right-radius: 0.375rem;\n        justify-content: space-between; align-items: center;">\n        <h3 style="color: white; font-size: 1.125rem; line-height: 1.75rem; margin: 0;">Wisdom Assistant</h3>\n        <button id="close-popup" style="color: white; background-color: transparent; border-style: none; cursor: pointer;">\n          <svg xmlns="http://www.w3.org/2000/svg" style="width: 1.5rem; height: 1.5rem; display: block; vertical-align: middle;" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">\n            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />\n          </svg>\n        </button>\n      </div>\n      <div id="chat-messages" style="padding: 1rem; overflow-y: auto; flex: 1 1 0%;"></div>\n      <div id="chat-input-container" style="padding: 1rem; border-top: 1px solid rgba(229,231,235,1);">\n        <div style="align-items: center;" \n            class="chat_flex space-x-4">\n          <input type="text" id="chat-input" style="outline: 1px solid transparent; border-color: grey; ;\n          padding: 0.5rem 1rem 0.5rem 1rem; border-width: 1px; border-radius: 0.375rem; flex: 1 1 0%; width: 75%; margin-right: 2rem;"\n            placeholder="Type your message...">\n          <button id="chat-submit" style="width:4rem; height: 2.1rem; background: #20bec8; color: white; text-align: center; border-radius: 0.375rem; cursor: pointer; border: none;">\n            <i id="button-text" style="font-style: normal">Send</i>\n            <i id="loading"  style="display: none; ">Sending</i>\n          </button>\n        </div>\n        <div style="font-size: .75rem;line-height: 1rem;text-align: center;padding-top: 1rem;" class="chat_flex">\n          <span style="flex: 1 1 0%;">Supported by <a href="https://openai.com" target="_blank" class="text-indigo-600">@OpenAI</a></span>\n        </div>\n      </div>\n    </div>\n  ';const chatInput=document.getElementById("chat-input"),chatSubmit=document.getElementById("chat-submit"),chatMessages=document.getElementById("chat-messages"),chatBubble=document.getElementById("chat-bubble"),closePopup=(document.getElementById("chat-popup"),document.getElementById("close-popup")),buttonText=document.getElementById("button-text"),loadingIcon=document.getElementById("loading");let loading=!1;chatSubmit.addEventListener("click",(function(){const message=chatInput.value.trim();if(message&&!loading){chatMessages.scrollTop=chatMessages.scrollHeight;chatInput.value="";!function(message){console.log("User request:",message);const messageElement=document.createElement("div");messageElement.className="chat_flex chat_msg";messageElement.innerHTML=`\n      <div style="background: #20bec8; color: white; padding: 0.5rem 1rem; border-radius: 0.5rem;">\n        ${message}\n      </div>\n    `;chatMessages.appendChild(messageElement);chatMessages.scrollTop=chatMessages.scrollHeight;chatInput.value="";!function(message){buttonSwitch(!0);const userMsg={role:"user",content:message};REQUEST_PAYLOAD.messages.push(userMsg);axios({method:"post",url:APU_URL,data:REQUEST_PAYLOAD,headers:REQUEST_HEADER}).then((function(response){REQUEST_PAYLOAD.messages.push(response.data.choices[0].message);reply(response.data.choices[0].message.content)})).catch((function(){reply("Error. Retry later.")})).finally((function(){buttonSwitch(!1)}))}(message)}(message)}}));chatInput.addEventListener("keyup",(function(event){"Enter"===event.key&&chatSubmit.click()}));chatBubble.addEventListener("click",(function(){togglePopup()}));closePopup.addEventListener("click",(function(){togglePopup()}));function reply(message){const chatMessages=document.getElementById("chat-messages"),replyElement=document.createElement("div");replyElement.className="chat_flex res_msg";replyElement.innerHTML=`\n      <div class="bg-gray-200 text-black rounded-lg py-2 px-4 max-w-[70%]" style="color: black; padding: 0.5rem 1rem; background-color: rgba(229,231,235,1); border-radius: 0.5rem;">\n        ${message}\n      </div>\n    `;chatMessages.appendChild(replyElement);chatMessages.scrollTop=chatMessages.scrollHeight}function buttonSwitch(status){loading=status;if(loading){buttonText.style.display="none";loadingIcon.style.display="inline"}else{buttonText.style.display="inline-block";loadingIcon.style.display="none"}}function togglePopup(){const chatPopup=document.getElementById("chat-popup");chatPopup.classList.toggle("chat_hidden");chatPopup.classList.contains("chat_hidden")||document.getElementById("chat-input").focus()}}();