!function(){document.head.insertAdjacentHTML("beforeend",'<link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.16/tailwind.min.css" rel="stylesheet">');const APU_URL="https://api.openai.com/v1/completions",REQUEST_HEADER={"Content-Type":"application/json",Authorization:"Bearer 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"},REQUEST_PAYLOAD={model:"gpt-3.5-turbo-instruct",prompt:"",max_tokens:4e3,temperature:0},script=document.createElement("script");script.src="https://cdn.bootcdn.net/ajax/libs/axios/1.5.0/axios.js";document.head.appendChild(script);const style=document.createElement("style");style.innerHTML="\n  .hidden {\n    display: none;\n  }\n  #chat-widget-container {\n    position: fixed;\n    bottom: 20px;\n    right: 20px;\n    flex-direction: column;\n  }\n  #chat-popup {\n    height: 70vh;\n    max-height: 70vh;\n    transition: all 0.3s;\n    overflow: hidden;\n  }\n  @media (max-width: 768px) {\n    #chat-popup {\n      position: fixed;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      max-height: 100%;\n      border-radius: 0;\n    }\n  }\n  ";document.head.appendChild(style);const chatWidgetContainer=document.createElement("div");chatWidgetContainer.id="chat-widget-container";document.body.appendChild(chatWidgetContainer);chatWidgetContainer.innerHTML='\n    <div id="chat-bubble" class="w-12 h-12 rounded-full flex items-center justify-center cursor-pointer text-3xl" style="background: #20bec8">\n      <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">\n        <path stroke-linecap="round" stroke-linejoin="round" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />\n      </svg>\n    </div>\n    <div id="chat-popup" class="hidden absolute bottom-20 right-0 w-96 bg-white rounded-md shadow-md flex flex-col transition-all text-sm">\n      <div id="chat-header" class="flex justify-between items-center p-4 text-white rounded-t-md" style="background: #20bec8">\n        <h3 class="m-0 text-lg">Wisdom Assistant</h3>\n        <button id="close-popup" class="bg-transparent border-none text-white cursor-pointer">\n          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">\n            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />\n          </svg>\n        </button>\n      </div>\n      <div id="chat-messages" class="flex-1 p-4 overflow-y-auto"></div>\n      <div id="chat-input-container" class="p-4 border-t border-gray-200">\n        <div class="flex space-x-4 items-center">\n          <input type="text" id="chat-input" class="flex-1 border border-gray-300 rounded-md px-4 py-2 outline-none w-3/4" placeholder="Type your message...">\n          <button id="chat-submit" class="text-white rounded-md px-4 py-2 cursor-pointer" style="background: #20bec8">\n            <i id="button-text" style="font-style: normal">Send</i>\n            <i id="loading"  style="display: none">\n              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">\n                <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM12.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM18.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0z" />\n              </svg>\n            </i>\n          </button>\n        </div>\n        <div class="flex text-center text-xs pt-4">\n          <span class="flex-1">Sopported by <a href="https://openai.com" target="_blank" class="text-indigo-600">@OpenAI</a></span>\n        </div>\n      </div>\n    </div>\n  ';const chatInput=document.getElementById("chat-input"),chatSubmit=document.getElementById("chat-submit"),chatMessages=document.getElementById("chat-messages"),chatBubble=document.getElementById("chat-bubble"),closePopup=(document.getElementById("chat-popup"),document.getElementById("close-popup")),buttonText=document.getElementById("button-text"),loadingIcon=document.getElementById("loading");chatSubmit.addEventListener("click",(function(){const message=chatInput.value.trim();if(message){chatMessages.scrollTop=chatMessages.scrollHeight;chatInput.value="";!function(message){console.log("User request:",message);const messageElement=document.createElement("div");messageElement.className="flex justify-end mb-3";messageElement.innerHTML=`\n      <div class="bg-gray-800 text-white rounded-lg py-2 px-4 max-w-[70%]">\n        ${message}\n      </div>\n    `;chatMessages.appendChild(messageElement);chatMessages.scrollTop=chatMessages.scrollHeight;chatInput.value="";!function(message){buttonSwitch(!0);REQUEST_PAYLOAD.prompt=message;axios({method:"post",url:APU_URL,data:REQUEST_PAYLOAD,headers:REQUEST_HEADER}).then((function(response){reply(response.data.choices[0].text)})).catch((function(){reply("Error. Retry later.")})).finally((function(){buttonSwitch(!1)}))}(message)}(message)}}));chatInput.addEventListener("keyup",(function(event){"Enter"===event.key&&chatSubmit.click()}));chatBubble.addEventListener("click",(function(){togglePopup()}));closePopup.addEventListener("click",(function(){togglePopup()}));function reply(message){const chatMessages=document.getElementById("chat-messages"),replyElement=document.createElement("div");replyElement.className="flex mb-3";replyElement.innerHTML=`\n      <div class="bg-gray-200 text-black rounded-lg py-2 px-4 max-w-[70%]">\n        ${message}\n      </div>\n    `;chatMessages.appendChild(replyElement);chatMessages.scrollTop=chatMessages.scrollHeight}function buttonSwitch(loading){if(loading){buttonText.style.display="none";loadingIcon.style.display="inline"}else{buttonText.style.display="inline-block";loadingIcon.style.display="none"}}function togglePopup(){const chatPopup=document.getElementById("chat-popup");chatPopup.classList.toggle("hidden");chatPopup.classList.contains("hidden")||document.getElementById("chat-input").focus()}}();